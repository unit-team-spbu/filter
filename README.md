# Сервис фильтрации мероприятий

Данный документ содержит описание работы и информацию о развертке микросервиса, предназначенного для фильтрации мероприятий по тэгам.

Название: `filter`

Структура сервиса:

| Файл               | Описание                                                |
| ------------------ | ------------------------------------------------------- |
| `filter.py`        | Код микросервиса                                        |
| `config.yml`       | Конфигурационный файл со строкой подключения к RabbitMQ |
| `run.sh`           | Файл для запуска сервиса из Docker контейнера           |
| `requirements.txt` | Верхнеуровневые зависимости                             |
| `Dockerfile`       | Описание сборки контейнера сервиса                      |
| `README.md`        | Описание микросервиса                                   |

## API

### RPC

ФИльтрация мероприятий по тэгам:

```bat
n.rpc.filter.get_events(user_id, tags)

Args:
    user_id,
    tags : list of tags like ['forums', 'online', ...]
Returns:
    [event_1, event_2, ..., event_m]
```

## Запуск

### Локальный запуск

Для локального запуска микросервиса требуется запустить контейнер с RabbitMQ.

```bat
docker run -p 5672:5672 --hostname nameko-rabbitmq rabbitmq:3
```

Затем из папки микросервиса вызвать

```bat
nameko run filter
```

Для проверки `rpc` запустите в командной строке:

```bat
nameko shell
```

После чего откроется интерактивная Python среда. Обратитесь к сервису одной из команд, представленных выше в разделе `rpc`
